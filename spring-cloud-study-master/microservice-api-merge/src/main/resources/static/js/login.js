/** * Registration form */var registnickname="";var registpassword="";var registemail="";$('#signup').submit(function(e) {    e.preventDefault();    registnickname = $("input[id='backloginform']").val();    registpassword = $("input[id='backpasswordform']").val();    if (registnickname.length < 1 || registpassword.length < 6) {        alert("Nickname must be at least 1 characters and password - at least 6. Be tricky!");        return;    }	$('#registrationforms, .fliptext, #createaccount').fadeOut(300);	$('#mailform').fadeIn(500);	setTimeout(function(){ $("#backmailform").focus() }, 10);});/** * E-mail form */$('#mail').submit(function(e) {	e.preventDefault();    registemail = $("input[name='usermail']").val();	if (registemail) {       if(checkregistaccess(registemail)){       		registnewuser(registemail,registpassword,registnickname,1);	   }	   else{       	alert("The email address has already been used.");	   }        setTimeout(function(){ $('#backmailform').val(''); $("#lastlogo").show(); }, 300);       location.reload();	}});/** * Login */function login() {	$("#piggy").toggleClass("loadingspin");	$("#secondenter").hide();	$("#preloader, #lastlogo").show();    var username = $("input[id='frontloginform']").val();    var password = $("input[id='frontpasswordform']").val();    if (requestOauthToken(username, password)) {        var userAvatar = $("<img />").attr("src","images/userpic.jpg");        $(userAvatar).load(function() {            setTimeout(initGreetingPage, 500);        });    } else {        alert("username or password is wrong!!");        location.reload();    }}/** * Logout */function logout() {    location.reload();}function checkregistaccess(username) {    var success = false;    $.ajax({        url: "http://114.115.137.183:8050/microservice-exam-merge/user/checkregistaccess",        type: 'post',        headers: {            "content-type": "application/x-www-form-urlencoded",            "cache-control": "no-cache",        },        async: false,        data: {            username: username,        },        success: function (data) {            success=data;        },        error: function () {        }    });    return success;}function registnewuser(username,password,nickname,role) {    var success = false;    $.ajax({        url: "http://114.115.137.183:8050/microservice-exam-merge/user/saveuser",        type: 'post',        headers: {            "content-type": "application/x-www-form-urlencoded",            "cache-control": "no-cache",        },        async: false,        data: {            username: username,            password: password,            nickname: nickname,            role: role        },        success: function (data) {            success=true;        },        error: function () {        }    });    return success;}$("#skipmail").bind("click", function(){    location.reload();});/** * Login form effects */function initialShaking(){	autoShake();	setTimeout(autoShake, 1900);}function autoShake() {	$("#piggy").toggleClass("auto-shake");}function OnHoverShaking() {	hoverShake();	setTimeout(hoverShake, 1700);}function hoverShake() {	$("#piggy").toggleClass("hover-shake");}function toggleInfo() {	$("#infopage").toggle();}function flipForm() {	$("#cube").toggleClass("flippedform");	$("#frontpasswordform").focus();}$("#piggy").on("click mouseover", function(){	if ($(this).hasClass("skakelogo") === false && $(this).hasClass("hover-shake") === false) {		OnHoverShaking();	}});$(".fliptext").bind("click", function(){	setTimeout( function() { $("#plusavatar").addClass("avataranimation"); } , 1000);	$("#flipper").toggleClass("flippedcard");});$(".flipinfo").on("click", function() {	$("#flipper").toggleClass("flippedcardinfo");	toggleInfo();});$(".frominfo, #infotitle, #infosubtitle").on("click", function() {	$("#flipper").toggleClass("flippedcardinfo");	setTimeout(toggleInfo, 400);});$("#enter").on("click", function() {flipForm()});$("#secondenter").on("click", function() {login()});$("#frontloginform").keyup(function (e) {	if( $(this).val().length >= 3 ) {		$("#enter").show();		if (e.which == 13) {			flipForm();			$("#enter").hide();		}		return;	} else {		$("#enter").hide();	}});$("#frontpasswordform").keyup(function(e) {	if ( $(this).val().length >= 6) {		$("#secondenter").show();		if(e.which == 13) {			$(this).blur();            login();		}		return;	} else {		$("#secondenter").hide();	}});